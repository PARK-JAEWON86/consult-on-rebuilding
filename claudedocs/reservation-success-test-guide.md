# 예약 요청 완료 메시지 테스트 가이드

## 구현 완료 일시
2025-10-26

## 테스트 목적
클라이언트가 예약 요청 버튼을 클릭했을 때, 성공 확인 화면이 정상적으로 표시되는지 검증

## 사전 준비

### 1. 서버 실행 확인
```bash
# API 서버 (포트 4000)
cd apps/api
pnpm run dev

# Web 서버 (포트 3001)
cd apps/web
pnpm run dev
```

### 2. 로그인 필요
- 테스트를 위해 일반 사용자 계정으로 로그인 필요
- 충분한 크레딧 잔액 확보 (최소 120 크레딧 권장)

## 테스트 시나리오

### ✅ 시나리오 1: 정상 예약 요청 플로우

#### Step 1: 전문가 목록 페이지 접속
1. 브라우저에서 `http://localhost:3001/experts` 접속
2. 전문가 목록이 정상적으로 로드되는지 확인
3. 아무 전문가 카드 클릭하여 상세 페이지 이동

**기대 결과**:
- ✅ 전문가 목록 정상 표시
- ✅ 클릭 시 상세 페이지로 이동

#### Step 2: 예약 모달 열기
1. 전문가 상세 페이지에서 "예약하기" 버튼 클릭
2. 예약 모달이 열리는지 확인

**기대 결과**:
- ✅ 모달 정상 오픈
- ✅ 헤더: "1단계: 날짜와 시간 선택" 표시

#### Step 3: 날짜 및 시간 선택
1. 캘린더에서 미래 날짜 선택
2. 가능한 시간 슬롯 클릭
3. 상담 시간(30분/60분) 선택
4. "다음" 버튼 클릭

**기대 결과**:
- ✅ 날짜 선택 정상 작동
- ✅ 시간 슬롯 선택 가능
- ✅ "다음" 버튼 활성화
- ✅ Step 2로 이동

#### Step 4: 상담 정보 입력
1. 상담 주제 입력 (예: "커리어 상담 요청")
2. 상담 유형 선택 (예: "일반 상담")
3. 현재 상황 입력 (선택사항)
4. "예약 요청" 버튼 클릭

**기대 결과**:
- ✅ 모든 필드 정상 입력 가능
- ✅ "예약 요청" 버튼 활성화
- ✅ 버튼 클릭 시 로딩 표시

#### Step 5: 성공 화면 확인 (🎯 핵심 테스트)

**기대 결과** - 다음 요소들이 모두 표시되어야 함:

1. **✅ 성공 아이콘**
   - 녹색 원형 배경의 CheckCircle 아이콘 (64px)

2. **✅ 메인 메시지**
   - "예약 요청이 완료되었습니다!" (2xl, bold)

3. **✅ 서브 메시지**
   - "전문가가 요청을 확인한 후 승인 여부를 알려드립니다."

4. **✅ 예약 정보 요약** (회색 박스)
   - 전문가 이름 표시
   - 선택한 날짜 (예: "10월 26일 (토)")
   - 선택한 시간 (예: "오후 2:00, 30분")

5. **✅ 다음 단계 안내** (파란색 박스)
   - "1. 전문가가 예약 요청을 확인합니다."
   - "2. 전문가가 승인하면 알림을 보내드립니다."
   - "3. 예약 관리 페이지에서 상태를 확인할 수 있습니다."

6. **✅ 대시보드 안내**
   - "예약 상태는 **대시보드 > 예약 관리**에서 확인하실 수 있습니다."

7. **✅ 확인 버튼**
   - "확인" 버튼 표시
   - 클릭 가능 상태

#### Step 6: 모달 닫기 및 검증
1. "확인" 버튼 클릭
2. 모달이 닫히는지 확인
3. 대시보드 > 예약 관리 페이지 접속
4. 방금 생성한 예약이 PENDING 상태로 표시되는지 확인

**기대 결과**:
- ✅ "확인" 클릭 시 모달 즉시 닫힘
- ✅ 예약 관리 페이지에 새 예약 표시
- ✅ 예약 상태: PENDING
- ✅ 크레딧 차감 확인

---

### ❌ 시나리오 2: 에러 케이스 테스트

#### 2-1: 크레딧 부족
1. 크레딧 잔액을 0으로 설정
2. 예약 요청 진행
3. 에러 메시지 확인

**기대 결과**:
- ❌ 성공 화면으로 이동하지 않음
- ✅ 에러 메시지 표시: "크레딧이 부족합니다"
- ✅ 모달이 confirm 단계에 유지됨

#### 2-2: 시간 충돌
1. 이미 예약된 시간에 다시 예약 요청
2. 충돌 에러 확인

**기대 결과**:
- ❌ 성공 화면으로 이동하지 않음
- ✅ 에러 메시지 표시: 시간 충돌 안내
- ✅ 모달이 confirm 단계에 유지됨

#### 2-3: 네트워크 에러
1. API 서버 중지
2. 예약 요청 진행

**기대 결과**:
- ❌ 성공 화면으로 이동하지 않음
- ✅ 에러 메시지 표시
- ✅ 모달이 confirm 단계에 유지됨

---

## 시각적 검증 체크리스트

### 레이아웃
- [ ] 성공 화면이 모달 중앙에 정렬되어 있음
- [ ] 모든 텍스트가 읽기 쉬운 크기로 표시됨
- [ ] 아이콘, 텍스트, 박스 간 여백이 적절함
- [ ] 모바일 화면에서도 잘 보임 (반응형 확인)

### 색상
- [ ] CheckCircle 아이콘: 녹색 (#10B981 계열)
- [ ] 배경: 연한 녹색 (#DCFCE7 계열)
- [ ] 예약 정보 박스: 회색 배경 (#F9FAFB)
- [ ] 다음 단계 박스: 파란색 배경 (#DBEAFE)
- [ ] 텍스트 색상: 충분한 대비 (접근성)

### 타이포그래피
- [ ] 메인 메시지: 2xl, bold, 진한 회색
- [ ] 서브 메시지: 기본 크기, 회색
- [ ] 예약 정보: 왼쪽 정렬, 적절한 간격
- [ ] 다음 단계: 번호 목록, 읽기 쉬움

### 애니메이션
- [ ] 모달 전환이 부드러움 (select → confirm → success)
- [ ] 버튼 hover 효과 정상 작동
- [ ] 로딩 상태 표시 적절함

---

## 기능 검증 체크리스트

### 상태 관리
- [ ] 예약 요청 성공 시 `setStep('success')` 호출됨
- [ ] 성공 화면에서 뒤로가기 버튼 없음 (의도된 동작)
- [ ] "확인" 버튼 클릭 시 모든 state 초기화됨
- [ ] 모달 닫힌 후 다시 열면 select 단계부터 시작

### 데이터 표시
- [ ] 전문가 이름이 정확히 표시됨
- [ ] 선택한 날짜가 한글 형식으로 표시됨 (예: "10월 26일 (토)")
- [ ] 선택한 시간이 12시간 형식으로 표시됨 (예: "오후 2:00")
- [ ] 상담 시간이 정확히 표시됨 (30분/60분 또는 "전문가와 협의")

### 캐시 무효화
- [ ] 예약 성공 시 `queryClient.invalidateQueries(['reservations'])` 호출됨
- [ ] 예약 성공 시 `queryClient.invalidateQueries(['credits'])` 호출됨
- [ ] 대시보드 접속 시 새 예약이 즉시 표시됨
- [ ] 크레딧 잔액이 업데이트됨

---

## 브라우저 호환성 테스트

### 데스크톱
- [ ] Chrome (최신)
- [ ] Firefox (최신)
- [ ] Safari (최신)
- [ ] Edge (최신)

### 모바일
- [ ] iOS Safari
- [ ] Android Chrome
- [ ] 반응형 레이아웃 정상 작동

---

## 접근성 테스트

### 키보드 네비게이션
- [ ] Tab 키로 "확인" 버튼 포커스 가능
- [ ] Enter 키로 "확인" 버튼 클릭 가능
- [ ] Esc 키로 모달 닫기 가능 (선택사항)

### 스크린 리더
- [ ] 성공 메시지가 명확히 읽힘
- [ ] 예약 정보가 구조적으로 읽힘
- [ ] 다음 단계가 순차적으로 읽힘
- [ ] 버튼 레이블이 명확함

### 색상 대비
- [ ] WCAG AA 기준 충족
- [ ] 색맹 모드에서도 구분 가능

---

## 성능 테스트

### 로딩 시간
- [ ] 예약 요청 후 1초 이내에 성공 화면 표시
- [ ] 네트워크 throttling 시에도 합리적인 시간 내 표시
- [ ] 로딩 상태가 명확히 표시됨

### 메모리
- [ ] 모달 닫은 후 메모리 누수 없음
- [ ] 여러 번 열고 닫아도 성능 저하 없음

---

## 버그 리포팅 템플릿

테스트 중 문제 발견 시 다음 정보 기록:

```
**문제 설명**:
[문제에 대한 간단한 설명]

**재현 단계**:
1. [첫 번째 단계]
2. [두 번째 단계]
3. [...]

**기대 결과**:
[정상적으로 작동했을 때 예상되는 동작]

**실제 결과**:
[실제로 발생한 동작]

**환경**:
- 브라우저: [Chrome 120.0, Safari 17.2, 등]
- OS: [macOS 14.1, Windows 11, 등]
- 화면 크기: [1920x1080, 375x667, 등]

**스크린샷**:
[가능한 경우 첨부]

**콘솔 에러**:
[브라우저 콘솔에 출력된 에러 메시지]
```

---

## 테스트 완료 후

### 체크리스트
- [ ] 모든 정상 케이스 테스트 완료
- [ ] 에러 케이스 테스트 완료
- [ ] 시각적 검증 완료
- [ ] 기능 검증 완료
- [ ] 브라우저 호환성 확인
- [ ] 접근성 테스트 완료
- [ ] 성능 테스트 완료

### 최종 승인
- [ ] 사용자 경험이 개선되었음
- [ ] 예약 요청 완료 여부가 명확히 전달됨
- [ ] 다음 단계가 명확히 안내됨
- [ ] 프로덕션 배포 준비 완료

---

## 참고 문서
- 구현 계획: [claudedocs/reservation-success-message-plan.md](reservation-success-message-plan.md)
- 구현 완료: [claudedocs/reservation-success-implementation-complete.md](reservation-success-implementation-complete.md)
- 충돌 에러 분석: [claudedocs/reservation-conflict-errors-analysis.md](reservation-conflict-errors-analysis.md)

---

## 문의
테스트 중 문제가 발생하거나 질문이 있으면 개발팀에 문의하세요.

**변경된 파일**:
- [apps/web/src/components/reservation/ReservationModalImproved.tsx](../apps/web/src/components/reservation/ReservationModalImproved.tsx)
